---
import LayoutDefault from '~/layouts/LayoutDefault.astro'
---

<LayoutDefault>
    <link rel="stylesheet" href="/css/link.css">
    <h2 class="page-title">友情链接</h2>

    <div class="category-container" id="recommended-container">
        <h3 class="category-title">推荐访问</h3>
        <div class="card-container" id="recommended-cards"></div>
    </div>

    <div class="category-container" id="friends-container">
        <h3 class="category-title">小伙伴们</h3>
        <div class="card-container" id="friends-cards"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            type Friend = {
                name: string;
                avatar: string;
                description: string;
                url: string;
                category: string;
            };

            const friends: Friend[] = [
                {
                    name: "Moeyy Blog",
                    avatar: "https://moeyy.cn/logourl",
                    description: "一条有远大理想的咸鱼。",
                    url: "https://moeyy.cn",
                    category: "recommended"
                },
                {
                    name: "安知鱼",
                    avatar: "https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg",
                    description: "生活明朗，万物可爱。",
                    url: "https://blog.anheyu.com/",
                    category: "recommended"
                }
            ];

            const recommendedContainer = document.getElementById('recommended-cards');
            const friendsContainer = document.getElementById('friends-cards');

            friends.forEach((friend) => {
                const card = createCard(friend);
                if (card) {
                    if (friend.category === 'recommended' && recommendedContainer) {
                        recommendedContainer.appendChild(card);
                    } else if (friend.category === 'friends' && friendsContainer) {
                        friendsContainer.appendChild(card);
                    }
                }
            });
        });

        function createCard(friend: {
            name: string;
            avatar: string;
            description: string;
            url: string;
        }): HTMLElement | null {
            const parser = new DOMParser();
            const doc = parser.parseFromString(`
                <a href="${friend.url}" target="_blank" rel="noopener noreferrer" class="card">
                    <img src="${friend.avatar}" alt="${friend.name} 的头像" class="avatar">
                    <div class="content-wrapper">
                        <div class="name">${friend.name}</div>
                        <div class="description">${friend.description}</div>
                    </div>
                </a>
            `, 'text/html');
            return doc.body.firstChild as HTMLElement;
        }
    </script>
</LayoutDefault>
